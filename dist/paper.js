!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.paper=e():t.paper=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=0)}([function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=t.name,n=void 0===e?"div":e,r=t.props,i=void 0===r?null:r,a=t.children,u=n;return"div"===u?u=document.createElement(u):"string"==typeof u&&(u=document.createElementNS("http://www.w3.org/2000/svg",u),u.style.webkitTapHighlightColor="rgba(0,0,0,0)"),i&&Object.keys(i).forEach(function(t){if("style"===t)return Object.assign(u.style,i.style);var e=t.split(":"),n=i[t];"xlink"===e[0]?u.setAttributeNS("http://www.w3.org/1999/xlink",e[1],n):(n||0===n)&&u.setAttribute(t,n)}),a&&a.forEach(function(t){return u.appendChild(o(t))}),u}function a(t){var e=localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return{}}return{}}function u(t){var e=t?"app-paper:"+t:null,n=e?a(e):{},r=null,i=function(t){e&&(n=T({},n,t),r&&clearTimeout(r),r=setTimeout(function(){r=null,localStorage.setItem(e,JSON.stringify(n))},500))};return{get:function(t){return t?n[t]:n},set:i}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var w=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function(){function t(e){i(this,t),this.$$model=[],this.push(e)}return w(t,[{key:"map",value:function(t){return this.$$model.map(t)}},{key:"filter",value:function(t){return this.$$model=this.$$model.filter(t),this}},{key:"push",value:function(t){"string"==typeof t&&(t=document.getElementById(t)),t&&1===t.nodeType&&this.$$model.push(t)}},{key:"children",value:function(e){var n=new t;return this.map(function(t){return[].forEach.call(t.childNodes,function(t){1!==t.nodeType||e&&!e(t)||n.push(t)})}),n}}]),t}(),g=function(t){return new b(t)},x=function(t){return"string"==typeof t?t:t+"px"},M=function(){var t=["t","webkitT","MozT","msT","OT"],e=document.createElement("div").style,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u+"ransform"in e)return u.slice(0,-1)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return""}(),E=function(t){return M?M+t.charAt(0).toUpperCase()+t.substr(1):t},O=E("perspective")in document.createElement("div").style,S=E("transform"),j=O?" translateZ(0)":"",k=function(t){var e=t.x,n=void 0===e?0:e,i=t.y,o=void 0===i?0:i;return r({},S,"translate("+x(n)+", "+x(o)+")"+j)},T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P=(Object.keys,Object.assign),z=function(t){return function(){return t++}}(+new Date),A=function(t){return function(e){var n=new Image;n.onload=function(){return t(null,n)},n.onerror=function(){return t(new Error("加载图片失败，请稍后再试。"))},n.src=e}},_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),I=function(){function t(){s(this,t),this.$$events={}}return C(t,[{key:"on",value:function(t,e){var n=this;return"string"!=typeof t?("object"===(void 0===t?"undefined":_(t))&&Object.keys(t).forEach(function(e){return n.on(e,t[e])}),this):"function"!=typeof e?this:(t in this.$$events?this.$$events[t].push(e):this.$$events[t]=[e],this)}},{key:"off",value:function(t,e){return void 0===t?(this.$$events={},this):"string"!=typeof t?this:void 0===e?(delete this.$$events[t],this):("function"==typeof e&&t in this.$$events&&(this.$$events[t]=this.$$events[t].filter(function(t){return t!==e})),this)}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"string"!=typeof t?this:(t in this.$$events&&this.$$events[t].length&&this.$$events[t].forEach(function(t){return t.apply(void 0,n)}),"$$emit"in this.$$events&&this.$$events.$$emit.length&&this.$$events.$$emit.forEach(function(e){return e.apply(void 0,[t].concat(n))}),this)}}]),t}(),L=(new I,window.rAF=window.requestAnimationFrame||window.windowebkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)}),q=function(t){return function(e){t||L(function(){return t&&t(),t=null}),t=e}},R=function(t,e){var n=!1,r=+new Date,i=function i(){if(n)return!1;var o=Math.min(1,(new Date-r)/t);!1!==e(o)&&o<1&&L(i)};return t>0&&L(i),{stop:function(){return n=!0}}},D=function(t){switch(t){case"linear":return function(t){return t};case"ease-in-out":return function(t){return t-Math.sin(2*Math.PI*t)/(2*Math.PI)};case"ease-in":return function(t){return Math.pow(t,3)};case"ease-out":return function(t){return Math.pow(t-1,3)+1};case"back-in":return function(t){var e=1.70158;return t*t*((e+1)*t-e)};case"back-out":return function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1};case"elastic":return function(t){return t<.4?Math.pow(2.5*t,3):Math.sin(5*t*Math.PI)*Math.cos(.5*t*Math.PI)/3+1};case"bounce":return function(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?(t-=1.5/n,e*t*t+.75):t<2.5/n?(t-=2.25/n,e*t*t+.9375):(t-=2.625/n,e*t*t+.984375)};default:return function(t){return t}}},F=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),N=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),B=function(t){function e(){c(this,e);var t=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.disabled=!1,t.listener=function(e){return function(n){return t.disabled||t.emit(e,n)}},t.handler={touchStart:t.listener("event:touchStart"),touchMove:t.listener("event:touchMove"),touchEnd:t.listener("event:touchEnd")},t.on("event:touchStart",function(e){return t.onTouchStart(e,e.touches)}),t.on("event:touchMove",function(e){return t.onTouchMove(e,e.touches)}),t.on("event:touchEnd",function(e){return t.onTouchEnd(e,e.touches)}),t}return l(e,t),N(e,[{key:"onTouchStart",value:function(t,e){if(this.status="start",this.touches=[].map.call(e,function(t){var e={};return e.sx=t.pageX,e.sy=t.pageY,e.st=+new Date,e}),this.emit("touchStart",t,this.touches),1===this.touches.length)return this.emit("moveStart",t,this.touches);this.emit("scaleStart",t,this.touches)}},{key:"onTouchMove",value:function(t,e){var n=this;return"pending"===this.status?this.onTouchStart(t,e):(this.status="touching",this.touches=[].map.call(e,function(t,e){var r=n.touches[e]||{},i=r.x,o=r.y,a=r.t;return r.x=t.pageX,r.y=t.pageY,r.t=+new Date,r.ox=i||r.x,r.oy=o||r.y,r.ot=a||r.t,r.direction?(r.dx=r.x-r.ox,r.dy=r.y-r.oy,r.dt=r.t-r.ot):(r.dx=r.x-r.sx,r.dy=r.y-r.sy,r.dt=r.t-r.st,r.direction=Math.abs(r.dx)>Math.abs(r.dy)?"x":"y"),r}),this.emit("touchMove",t,this.touches),1===this.touches.length?this.emit("moving",t,this.touches):void this.emit("scaling",t,this.touches))}},{key:"onTouchEnd",value:function(t,e){if(this.status="pending",this.emit("touchEnd",t,this.touches),0===e.length){var n=this.touches[0],r=n.st,i=n.direction,o=!this.disableTap&&!i&&new Date-r<500;return this.disableTap=!1,this.emit(o?"tap":"moveEnd",t,this.touches)}this.emit("scaleEnd",t,this.touches),this.disableTap=!0}},{key:"getScale",value:function(){if(this.touches.length>1){var t=F(this.touches,2),e=t[0],n=t[1],r=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),i=Math.sqrt(Math.pow(e.ox-n.ox,2)+Math.pow(e.oy-n.oy,2)),o={x:(e.x+n.x)/2,y:(e.y+n.y)/2},a={x:(e.ox+n.ox)/2,y:(e.oy+n.oy)/2},u=r/i;return{scale:u,dx:o.x-u*a.x,dy:o.y-u*a.y}}return null}},{key:"mountTo",value:function(t){t.addEventListener("touchstart",this.handler.touchStart,!1),t.addEventListener("touchmove",this.handler.touchMove,!1),t.addEventListener("touchend",this.handler.touchEnd,!1),t.addEventListener("touchcancel",this.handler.touchEnd,!1)}},{key:"unmountTo",value:function(t){t.removeEventListener("touchstart",this.handler.touchStart,!1),t.removeEventListener("touchmove",this.handler.touchMove,!1),t.removeEventListener("touchend",this.handler.touchEnd,!1),t.removeEventListener("touchcancel",this.handler.touchEnd,!1)}}]),e}(I),Z=B,W=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),J="position: absolute; left: 0; right: 0; top: 0; bottom: 0;",X={},U=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.store;f(this,e);var r=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.$$id=z(),r.$$x=null,r.$$curr=n.get("view")||0,r.$$views=[],r.$$size={width:0,height:0},r.$$toucher=new Z,r.$$updater=q(),r.$$container=document.createElement("div"),r.$$animater=null,r.$$isStop=!1,r.$$container.style.cssText=J,r.$$toucher.on("touchStart",function(){r.$$isStop=!1,r.$$animater&&r.$$animater.stop(),r.emit("app:touchStart",{touches:[]},r.$$curr)}),r.$$toucher.on("moving",function(t,e){var n=Y(e,1),i=n[0],o=!1;r.emit("app:moving",{touches:[i],stopPropagation:function(){return o=!0}},r.$$curr),o?r.$$isStop=!0:i.dx&&r.$$updater(function(){return r.translateTo(r.$$x+100*i.dx/r.$$size.width)})}),r.$$toucher.on("moveEnd",function(t,e){r.emit("app:moveEnd",{touches:e},r.$$curr)}),r.$$toucher.on("scaling",function(t,e){r.emit("app:scaling",{touches:e},r.$$curr)}),r.$$toucher.on("tap",function(t,e){var n=Y(e,1),i=n[0];if(i){var o=i.sx,a=i.sy,u={sx:o,sy:a};r.emit("app:tap",u,r.$$curr),r.emit("tap",t,[u])}}),r.$$toucher.on("touchEnd",function(t,e){var i=Y(e,1),o=i[0];if(o){var a=Math.abs(o.dx/o.dt),u=!r.$$isStop&&a>.3?o.dx>1?50:-50:0,s=r.$$x+u,c=Math.max(0,Math.min(Math.round(-s/100),r.$$views.length-1)),h=D("ease-out");s=r.$$x,u=100*-c-r.$$x,r.$$animater&&r.$$animater.stop(),r.$$animater=u&&R(300,function(t){r.translateTo(s+u*h(t)),t>=1&&c!==r.$$curr&&(n.set({view:c}),r.$$curr=c,r.emit("change",r.$$curr))})}r.emit("app:touchEnd",{touches:[]},r.$$curr)}),r}return d(e,t),H(e,[{key:"mount",value:function(t){return X[this.$$id]=this,this.$$toucher.mountTo(this.$$container),this.$$curr=Math.max(0,Math.min(this.$$views.length-1,this.$$curr)),this.translateTo(100*-this.$$curr),this.emit("change",this.$$curr),t.setAttribute("data-swiper",this.$$id),t.appendChild(this.$$container),this.$$size={width:this.$$container.clientWidth,height:this.$$container.clientHeight},this.emit("app:mount",this.$$size),this}},{key:"unmount",value:function(t){delete X[this.$$id],this.$$toucher.unmountTo(this.$$container),t.setAttribute("data-swiper",""),t.removeChild(this.$$container),this.off(),this.$$id=null,this.$$frame=null,this.$$container=null,this.$$events=null}},{key:"append",value:function(t){if(t&&t.mount){var e=document.createElement("div"),n=this.$$views.length;e.style.cssText=J,P(e.style,W({},k({x:100*n+"%"}),{overflow:"hidden"})),"emit"in t&&this.on("$$emit",function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";"all"!==i&&i!==n||t.emit(e,r)}),t.mount(e),this.$$container.appendChild(e),this.$$views.push(e)}return this}},{key:"translateTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t!==this.$$x&&(this.$$x=t,P(this.$$container.style,k({x:t+"%"})))}}]),e}(I),G=U,K=function(t){var e=t.getAttribute("data-swiper")||"",n=e&&X[e];return n&&n.unmount(t),t},Q=function(t,e){return function(n){var r=n.x,i=n.y,o=n.scale,a=o*e.scale,u=t.width/a,s=1*(.4*Math.min(3,Math.max(1,o)-1)+1)/a,c=e.width*a,h=c*e.ratio;return{fontSize:s+"px",backgroundPosition:r+"px "+i+"px",backgroundSize:c+"px "+h+"px",viewBox:-r/a+" "+-i/a+" "+u+" "+u*t.ratio,canvas:{width:c,height:h}}}},V=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),tt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},et=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),nt=function(t){function e(t){var n=t.id,r=void 0===n?z():n,i=t.url,a=t.data,u=t.store;y(this,e);var s=$(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.$$snap=!1,s.$$scaler=null,s.$$updater=q(),s.$$animater=null,s.$$ease=D("ease-out"),s.$$container=document.createElement("div"),s.view={width:0,height:0},s.size={width:0,height:0,scale:1},s.state=tt({x:0,y:0,scale:1},u.get(r)),s.canvas={cx:0,cy:0},s.on("update",function(t){s.state=tt({},s.state,t),u.set(v({},r,s.state))}),s.on("app:mount",function(t){var e=t.width,n=void 0===e?0:e,r=t.height,u=void 0===r?0:r;s.view={width:n,height:u,ratio:u/n},i&&n&&u&&A(function(t,e){t||(s.size.width=e.width,s.size.height=e.height,s.size.ratio=s.size.height/s.size.width,s.size.scale=Math.min(n/s.size.width,u/s.size.height),s.size.maxScale=Math.max(1/s.size.scale,3),P(s.$$container.style,{position:"absolute",top:0,left:0,right:0,bottom:0,background:"url("+e.src+") no-repeat"}),s.$$scaler=Q(s.view,s.size),s.$$canvas=o(a),s.reset(s.update()),s.$$container.appendChild(s.$$canvas))})(i)}),s.on("app:touchStart",function(){s.$$animater&&s.$$animater.stop()}),s.on("app:scaling",function(t){var e=t.touches;if(s.$$scaler){var n=V(e,2),r=n[0],i=n[1],o=s.state,a=o.x,u=o.y,c=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),h=Math.sqrt(Math.pow(r.ox-i.ox,2)+Math.pow(r.oy-i.oy,2)),l={x:(r.x+i.x)/2,y:(r.y+i.y)/2},f={x:(r.ox+i.ox)/2,y:(r.oy+i.oy)/2},p=c/h;s.state={x:(a-f.x)*p+l.x,y:(u-f.y)*p+l.y,scale:p*s.state.scale},s.canvas={cx:l.x,cy:l.y},s.$$updater(function(){return s.update()})}}),s.on("app:moving",function(t){if(s.$$scaler){var e=V(t.touches,1),n=e[0],r=s.canvas.width,i=n.dx+s.state.x;!s.$$snap&&i<0&&i>s.view.width-r?t.stopPropagation():(s.$$snap=!0,i=s.state.x),s.state.x=i,s.state.y=s.state.y+n.dy,s.$$updater(function(){return s.update()})}}),s.on("app:moveEnd",function(t){var e=V(t.touches,1),n=e[0];if(n&&n.dx&&n.dy){var r=n.dx,i=n.dy;s.$$animater&&s.$$animater.stop(),s.$$animater=R(1e3,function(t){if(r*=.95,i*=.95,t>=1||Math.abs(r)<1&&Math.abs(i)<1||s.state.x>0||s.state.y>0||s.state.x<s.view.width-s.canvas.width||s.state.y<s.view.height-s.canvas.height)return s.reset()||!1;s.state.x+=r,s.state.y+=i,s.update()})}}),s.on("app:tap",function(t){var e=s.$$container.getBoundingClientRect(),n=s.state,r=n.x,i=n.y,o=n.scale;o*=s.size.scale,t.sx=(t.sx-e.left-r)/o,t.sy=(t.sy-e.top-i)/o}),s.on("app:touchEnd",function(){s.reset(),s.$$snap=!1}),s}return m(e,t),et(e,[{key:"mount",value:function(t){t.appendChild(this.$$container)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;if(this.$$canvas&&this.$$scaler){var e=this.$$scaler(t),n=e.backgroundPosition,r=e.backgroundSize,i=e.viewBox,o=e.fontSize,a=e.canvas;this.canvas=tt({},this.canvas,a),this.$$canvas.setAttribute("viewBox",i),this.emit("update",t),P(this.$$canvas.style,{fontSize:o}),P(this.$$container.style,{backgroundSize:r,backgroundPosition:n})}}},{key:"reset",value:function(){var t=this,e=this.state,n=e.x,r=e.y,i=e.scale,o=this.canvas,a=o.cx,u=o.cy,s=Math.max(1,Math.min(i,this.size.maxScale)),c=s*this.size.scale*this.size.width,h=c*this.size.ratio,l=s/i,f=s-i,p=void 0,d=void 0;p=c<this.view.width?(this.view.width-c)/2-n:Math.min(0,Math.max(this.view.width-c,(n-a)*l+a))-n,d=Math.min(0,Math.max(this.view.height-h,(r-u)*l+u))-r,(p||d||f)&&(this.$$animater&&this.$$animater.stop(),this.$$animater=R(300,function(e){e=t.$$ease(e),t.update({x:n+p*e,y:r+d*e,scale:i+f*e})}))}}]),e}(I),rt=nt,it=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at=this,ut=function(t){var e=t.mark,n=t.positionList,r=t.problemList,i=[],o={fill:"white","fill-opacity":0,stroke:"red",style:{strokeWidth:"1em"}},a={style:{r:"6em",strokeWidth:"8em"},strokeOpacity:0};if(e){var u=at.size,s=u.width,c=u.height,h="M0, 0v"+c+"h"+s+"v"+-c+"Z"+n.map(function(t){var e=t.coordinate;if(!e||"object"!==(void 0===e?"undefined":ot(e)))return"";if(Array.isArray(e))return"M"+e.map(function(t){return t.join(", ")}).join("L")+"Z";if("x"in e){var n=e.x,r=e.y,i=e.width;return"M"+n+", "+r+"h"+i+"v"+e.height+"h"+-i+"Z"}return""}).join("");i.push({name:"path",props:{d:h,fill:"black","fill-opacity":.3,"fill-rule":"evenodd",stroke:"none"}})}return n&&n.forEach(function(t){var e=t.id,n=t.coordinate;return n&&"object"===(void 0===n?"undefined":ot(n))?Array.isArray(n)?i.push({name:"path",props:it({id:e},o,{d:"M"+n.map(function(t){return t.join(", ")}).join("L")+"Z"})}):"x"in n?i.push({name:"rect",props:it({id:e},o,n)}):void 0:""}),r&&r.forEach(function(t){var e=t.id,n=t.color,r=void 0===n?"red":n,o=t.coordinate,u=o.x,s=o.y;return i.push({name:"circle",props:it({id:e,fill:r},a,{cx:u,cy:s})})}),{name:"svg",props:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:ev":"http://www.w3.org/2001/xml-events",x:"0",y:"0",width:"100%",height:"100%",preserveAspectRatio:"xMidYMin meet","xml:space":"preserve",style:{display:"block",position:"relative",left:"-0.5px",overflow:"hidden"}},children:i}};n.d(e,"render",function(){return ct}),n.d(e,"unmount",function(){return ht});var st=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ct=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,r=e.views,i=void 0===r?[]:r,o=e.onTap,a=e.onChange,s=u(n),c=new G({store:s});return c.on("change",a),c.on("tap",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=st(e,1),r=n[0];if(r&&r.sx){var i=t.target||{},a=i.tagName,u="",s="";if("evenodd"===i.getAttribute("fill-rule"))return;"circle"===a?(s="point",u=i.getAttribute("id")):"path"!==a&&"rect"!==a||(s="area",u=i.getAttribute("id")),o&&o({id:u,type:s,x:r.sx,y:r.sy})}}),i.forEach(function(t){return c.append(new rt({id:t.id,url:t.path,store:s,data:ut(t)}))}),g(t).map(function(t){return c.mount(K(t))}),c},ht=function(t){return g(t).map(K)}}])});