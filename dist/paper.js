!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],e):"object"==typeof exports?exports.paper=e(require("React"),require("ReactDOM")):t.paper=e(t.React,t.ReactDOM)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=1)}([function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=localStorage.getItem(R),n={$$key:t};if(e)try{return e=JSON.parse(e),e.$$key===t?e:n}catch(t){return n}return n}function a(t){var e=t?"app-paper:"+t:null,n=e?o(e):{},r=null,i=function(t){e&&(n=A({},n,t),r&&clearTimeout(r),r=setTimeout(function(){r=null,localStorage.setItem(R,JSON.stringify(n))},500))};return{get:function(t){return t?n[t]:n},set:i}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function $(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var b=n(0),w=n.n(b),g=n(2),x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),M=function(){function t(e){i(this,t),this.$$model=[],this.push(e)}return x(t,[{key:"map",value:function(t){return this.$$model.map(t)}},{key:"filter",value:function(t){return this.$$model=this.$$model.filter(t),this}},{key:"push",value:function(t){"string"==typeof t&&(t=document.getElementById(t)),t&&1===t.nodeType&&this.$$model.push(t)}},{key:"children",value:function(e){var n=new t;return this.map(function(t){return[].forEach.call(t.childNodes,function(t){1!==t.nodeType||e&&!e(t)||n.push(t)})}),n}}]),t}(),O=function(t){return new M(t)},k=function(t){return"string"==typeof t?t:t+"px"},S=function(){var t=["t","webkitT","MozT","msT","OT"],e=document.createElement("div").style,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u+"ransform"in e)return u.slice(0,-1)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return""}(),T=function(t){return S?S+t.charAt(0).toUpperCase()+t.substr(1):t},j=T("perspective")in document.createElement("div").style,E=T("transform"),P=j?" translateZ(0)":"",_=function(t){var e=t.x,n=void 0===e?0:e,i=t.y,o=void 0===i?0:i;return r({},E,"translate("+k(n)+", "+k(o)+")"+P)},A=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R="$app/paper_store",z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),D=function(){function t(){u(this,t),this.$$events={}}return C(t,[{key:"on",value:function(t,e){var n=this;return"string"!=typeof t?("object"===(void 0===t?"undefined":z(t))&&Object.keys(t).forEach(function(e){return n.on(e,t[e])}),this):"function"!=typeof e?this:(t in this.$$events?this.$$events[t].push(e):this.$$events[t]=[e],this)}},{key:"off",value:function(t,e){return void 0===t?(this.$$events={},this):"string"!=typeof t?this:void 0===e?(delete this.$$events[t],this):("function"==typeof e&&t in this.$$events&&(this.$$events[t]=this.$$events[t].filter(function(t){return t!==e})),this)}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"string"!=typeof t?this:(t in this.$$events&&this.$$events[t].length&&this.$$events[t].forEach(function(t){return t.apply(void 0,n)}),"$$emit"in this.$$events&&this.$$events.$$emit.length&&this.$$events.$$emit.forEach(function(e){return e.apply(void 0,[t].concat(n))}),this)}}]),t}(),I=(new D,Object.keys,Object.assign),q=function(t){return function(){return t++}}(+new Date),U=function(t){return function(e){var n=new Image;n.onload=function(){return t(null,n)},n.onerror=function(){return t(new Error("加载图片失败，请稍后再试。"))},n.src=e}},L={},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){if(n.width<t)return n.src;if(n.src in L)return L[n.src];var r=document.createElement("canvas"),i=r.getContext("2d"),o=n.width,a=n.height,u=void 0;return r.style.display="none",e=e||t*a/o,r.width=i.width=t,r.height=i.height=e,document.body.appendChild(r),i.drawImage(n,0,0,o,a,0,0,t,e),u=r.toDataURL(),document.body.removeChild(r),u}},W=window.rAF=window.requestAnimationFrame||window.windowebkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},B=function(t){return function(e){t||W(function(){return t&&t(),t=null}),t=e}},F=function(t,e){var n=!1,r=+new Date,i=function i(){if(n)return!1;var o=Math.min(1,(new Date-r)/t);!1!==e(o)&&o<1&&W(i)};return t>0&&W(i),{stop:function(){return n=!0}}},V=function(t){switch(t){case"linear":return function(t){return t};case"ease-in-out":return function(t){return t-Math.sin(2*Math.PI*t)/(2*Math.PI)};case"ease-in":return function(t){return Math.pow(t,3)};case"ease-out":return function(t){return Math.pow(t-1,3)+1};case"back-in":return function(t){var e=1.70158;return t*t*((e+1)*t-e)};case"back-out":return function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1};case"elastic":return function(t){return t<.4?Math.pow(2.5*t,3):Math.sin(5*t*Math.PI)*Math.cos(.5*t*Math.PI)/3+1};case"bounce":return function(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?(t-=1.5/n,e*t*t+.75):t<2.5/n?(t-=2.25/n,e*t*t+.9375):(t-=2.625/n,e*t*t+.984375)};default:return function(t){return t}}},Z=(n(3),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),H=function(t){return{x:t.pageX,y:t.pageY,t:+new Date}},Y=function(t,e){var n=e||{},r=n.x,i=n.y,o=n.t,a={ox:r||t.x,oy:i||t.y,ot:o||t.t},u=t.direction;return a.dx=t.x-a.ox,a.dy=t.y-a.oy,a.dt=t.t-a.ot,u||(u=Math.abs(a.dx)>Math.abs(a.dy)?"x":"y"),Z({},t,a,{direction:u})},J=function(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.x,i=void 0===r?0:r,o=n.y,a=void 0===o?0:o,u=n.scale,s=void 0===u?1:u,c=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),h=Math.sqrt(Math.pow(t.ox-e.ox,2)+Math.pow(t.oy-e.oy,2)),l={x:(t.x+e.x)/2,y:(t.y+e.y)/2},f={x:(t.ox+e.ox)/2,y:(t.oy+e.oy)/2},p=c/h;return{x:(i-f.x)*p+l.x,y:(a-f.y)*p+l.y,scale:s*p,cx:l.x,cy:l.y}}},X=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),G=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K={scale:J,tap:function(t,e){return[G({},e[0],H(t[0]))]},one:function(t,e){return[G({},e[0],Y(H(t[0]),e[0]))]},two:function(t,e){return[G({},e[0],Y(H(t[0]),e[0])),G({},e[1],Y(H(t[1]),e[1]))]}},Q=function(t){function e(t){var n;c(this,e);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=h(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this,t].concat(i)));return a.$$status="pending",a.$$touches=[],a.$$updater=null,a.$$tapable=!0,a.componentWillReceiveProps(t),a.$$events={onTouchStart:a.handleTouchStart.bind(a),onTouchMove:a.handleTouchMove.bind(a),onTouchEnd:a.handleTouchEnd.bind(a),onTouchCancel:a.handleTouchEnd.bind(a)},a}return l(e,t),X(e,[{key:"componentWillReceiveProps",value:function(t){var e=this;return t.onScale?this.$$updater=this.scaleUpdater:t.onMove?this.$$updater=this.moveUpdater:void(this.$$updater=function(t,n){return e.$$touches=K.tap(n,e.$$touches)})}},{key:"shouldComponentUpdate",value:function(t){return t.className!==this.props.className||t.style!==this.props.style||t.children!==this.props.children}},{key:"render",value:function(){return w.a.createElement("div",G({ref:this.props.onMount,className:this.props.className,style:this.props.style},this.$$events),this.props.children)}},{key:"scaleUpdater",value:function(t,e){return e.length>1?(this.$$touches=K.two(e,this.$$touches),this.props.onScale({event:t,touches:this.$$touches,scaler:K.scale.apply(K,s(this.$$touches))})):this.props.onMove?this.moveUpdater(t,e):void(this.$$touches=K.tap(e))}},{key:"moveUpdater",value:function(t,e){this.$$touches=K.one(e,this.$$touches),this.props.onMove({event:t,touches:this.$$touches})}},{key:"handleTouchStart",value:function(t){if(this.$$status="start",this.$$touches=[].map.call(t.touches||[],function(t){var e={};return e.sx=e.x=t.pageX,e.sy=e.y=t.pageY,e.st=e.t=+new Date,e}),this.emit("onTouchStart",t),this.$$touches.length>1)return this.emit("onScaleStart",t);this.emit("onMoveStart",t)}},{key:"handleTouchMove",value:function(t){if("pending"===this.$$status)return this.handleTouchStart(t);this.$$status="touching",this.$$updater(t,t.touches),this.emit("onTouchMove",t)}},{key:"handleTouchEnd",value:function(t){if("pending"===this.$$status)return!1;if(this.$$status="pending",this.emit("onTouchEnd",t),1===this.$$touches.length){if(this.props.onTap){var e=this.$$touches[0],n=e.st,r=e.sx,i=e.sy,o=e.x,a=e.y;if(this.$$tapable&&new Date-n<1e3&&Math.abs(o-r)<10&&Math.abs(a-i)<10)return this.props.onTap({event:t,touches:this.$$touches})}return this.$$tapable=!0,this.emit("onMoveEnd",t)}this.$$tapable=!1,this.emit("onScaleEnd",t)}},{key:"emit",value:function(t,e){this.props[t]&&this.props[t]({event:e,touches:this.$$touches})}}]),e}(b.Component),tt=Q,et=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),nt=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,n,r,i){var o=e&&e.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var u in o)void 0===n[u]&&(n[u]=o[u]);else n||(n=o||{});if(1===a)n.children=i;else if(a>1){for(var s=Array(a),c=0;c<a;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:t,type:e,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),rt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},it=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),ot={position:"absolute",top:0,bottom:0,left:0,right:0},at=function(t){function e(t){var n;f(this,e);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=p(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this,t].concat(i)));return a.$$x=null,a.$$curr=null,a.$$view=null,a.$$updater=B(),a.$$animater=null,a.$$event={onMount:function(t){return a.$$target=t},onTouchStart:a.handleMoveStart.bind(a),onMove:a.handleMove.bind(a),onMoveEnd:a.handleMoveEnd.bind(a)},a}return $(e,t),it(e,[{key:"render",value:function(){return w.a.createElement(tt,rt({style:ot},this.$$event),this.renderView(this.props.children))}},{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){this.$$target&&this.updateView(this.props)}},{key:"renderView",value:function(t){return this.$$count=b.Children.count(t),b.Children.map(t,function(t,e){var n=t.props&&t.props.id||e,r="translate("+100*e+"%, 0)",i=rt({},ot,{overflow:"hidden",transform:r,WebkitTransform:r});return nt("div",{style:i},n,t)})}},{key:"updateView",value:function(t){var e=this,n=t.curr,r=void 0===n?0:n,i=t.children,o=t.onChange;this.$$view={count:b.Children.count(i),width:this.$$target.clientWidth,height:this.$$target.clientHeight},(r=Math.max(0,Math.min(this.$$view.count-1,r||0)))!==this.$$curr&&(this.$$updater(function(){return e.translateTo(100*-r)}),o&&o(this.$$curr=r))}},{key:"translateTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t!==this.$$x&&this.$$target&&(this.$$x=t,I(this.$$target.style,_({x:t+"%"})))}},{key:"handleMoveStart",value:function(){this.$$animater&&this.$$animater.stop()}},{key:"handleMove",value:function(t){var e=this,n=et(t.touches,1),r=n[0];this.$$updater(function(){return e.translateTo(e.$$x+100*r.dx/e.$$view.width)})}},{key:"handleMoveEnd",value:function(t){var e=this,n=et(t.touches,1),r=n[0],i=r.dt?Math.abs(r.dx/r.dt):0,o=i>.3?r.dx>1?50:-50:0,a=this.$$x+o,u=Math.max(0,Math.min(Math.round(-a/100),this.$$view.count-1)),s=V("ease-out");a=this.$$x,(o=100*-u-this.$$x)&&(this.$$animater&&this.$$animater.stop(),this.$$animater=F(300,function(t){e.translateTo(a+o*s(t)),t>=1&&u!==e.$$curr&&(e.$$curr=u,e.props.onChange&&e.props.onChange(u))}))}}]),e}(b.Component),ut=at,st=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht=function(t){var e=t.id,n=void 0===e?q():e,r=t.mark,i=t.positionList,o=t.problemList,a=t.size,u=t.url,s=[],c={fill:"white",fillOpacity:0,stroke:"red",strokeWidth:"0.1em"},h={r:"0.8em",strokeWidth:"1em",strokeOpacity:0};if(s.push({name:"image",props:{key:n+":image",xlinkHref:u,width:a.width,height:a.height}}),r){var l="M0, 0v"+a.height+"h"+a.width+"v"+-a.height+"Z"+i.map(function(t){var e=t.coordinate;if(!e||"object"!==(void 0===e?"undefined":ct(e)))return"";if(Array.isArray(e))return"M"+e.map(function(t){return t.join(", ")}).join("L")+"Z";if("x"in e){var n=e.x,r=e.y,i=e.width;return"M"+n+", "+r+"h"+i+"v"+e.height+"h"+-i+"Z"}return""}).join("");s.push({name:"path",props:{d:l,key:n+":mark",fill:"black",fillOpacity:.3,fillRule:"evenodd",stroke:"none"}})}return i&&i.forEach(function(t){var e=t.id,r=t.coordinate;return r&&"object"===(void 0===r?"undefined":ct(r))?Array.isArray(r)?s.push({name:"path",props:st({id:e,key:n+"("+s.length+":"+e},c,{d:"M"+r.map(function(t){return t.join(", ")}).join("L")+"Z"})}):"x"in r?s.push({name:"rect",props:st({id:e,key:n+"("+s.length+":"+e},c,r)}):void 0:""}),o&&o.forEach(function(t){var e=t.id,r=t.color,i=void 0===r?"red":r,o=t.coordinate,a=o.x,u=o.y;return s.push({name:"circle",props:st({id:e,key:n+"("+s.length+":"+e,fill:i},h,{cx:a,cy:u})})}),s},lt=function(t,e){return function(n){var r=n.x,i=n.y,o=n.scale,a=o*e.scale,u=t.width/a,s=10*(.4*Math.min(3,Math.max(1,o)-1)+1)*1/a,c=e.width*a,h=c*e.ratio;return{fontSize:s+"px",viewBox:[-(r||0)/a,-(i||0)/a,u,2*u*t.ratio].join(" "),canvas:{width:c,height:h}}}},ft=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$t=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),dt={display:"block",position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"hidden"},vt={x:"0",y:"0",width:"100%",height:"100%",preserveAspectRatio:"xMidYMin slice"},yt={display:"block",position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"},mt=function(t){function e(t){var n;d(this,e);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=v(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this,t].concat(i)));return a.$$target=null,a.$$canvas=null,a.$$scaler=null,a.$$animater=null,a.$$image=null,a.$$updater=B(),a.$$ease=V("ease-out"),a.$$size={width:0,height:0},a.$$view={width:0,height:0},a.$$paper={width:0,height:0,cx:0,cy:0},a.$$snap=!1,a.$$events={onMount:function(t){return a.$$target=t},onTap:a.handleTap.bind(a),onTouchStart:a.handleTouchStart.bind(a),onTouchEnd:a.handleTouchEnd.bind(a),onMove:a.handleMove.bind(a),onMoveEnd:a.handleMoveEnd.bind(a),onScale:a.handleScale.bind(a)},a.$$resizer=N(),a.$$loader=U(function(t,e){t||(a.$$view.width=a.$$target.clientWidth,a.$$view.height=a.$$target.clientHeight,a.$$view.ratio=a.$$view.height/a.$$view.width,a.$$size.width=e.width,a.$$size.height=e.height,a.$$size.ratio=a.$$size.height/a.$$size.width,a.$$size.scale=Math.min(a.$$view.width/a.$$size.width,a.$$view.height/a.$$size.height),a.$$size.maxScale=Math.max(1/a.$$size.scale,3),a.$$scaler=lt(a.$$view,a.$$size),a.setState({url:a.$$resizer(e)}),a.reset(0))}),a.state=pt({url:"",x:0,y:0,scale:1},t.scale),a}return y(e,t),$t(e,[{key:"componentWillReceiveProps",value:function(t){this.setState(pt({},this.state,t.scale)),t.path!==this.props.path&&this.$$loader(t.path)}},{key:"render",value:function(){var t=this,e=this.update()||{},n=e.viewBox,r=e.fontSize;return w.a.createElement(tt,pt({style:dt},this.$$events),w.a.createElement("svg",pt({ref:function(e){return t.$$canvas=e}},vt,{viewBox:n,style:pt({},yt,{fontSize:r})}),this.state.url&&this.renderCanvas()))}},{key:"componentDidMount",value:function(){this.$$loader(this.props.path)}},{key:"renderCanvas",value:function(){var t=this.props,e=t.id,n=t.mark,r=t.positionList,i=t.problemList,o={id:e,mark:n,positionList:r,problemList:i,size:this.$$size,url:this.state.url};return ht(o).map(function(t){var e=t.name,n=t.props;return Object(b.createElement)(e,n)})}},{key:"updateState",value:function(t){var e=t.x,n=void 0===e?this.state.x:e,r=t.y,i=void 0===r?this.state.y:r,o=t.scale,a=void 0===o?this.state.scale:o;(n!==this.state.x||i!==this.state.y||a!==this.state.scale)&&(this.setState({x:n,y:i,scale:a}),this.props.onScale&&this.props.onScale({x:n,y:i,scale:a}))}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;if(this.$$canvas&&this.$$scaler){var e=this.$$scaler(t),n=e.viewBox,r=e.fontSize,i=e.canvas;return this.$$paper=pt({},this.$$paper,i),{viewBox:n,fontSize:r}}}},{key:"reset",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=this.state,r=n.x,i=n.y,o=n.scale,a=this.$$paper,u=a.cx,s=a.cy,c=Math.max(1,Math.min(o,this.$$size.maxScale)),h=c*this.$$size.scale*this.$$size.width,l=h*this.$$size.ratio,f=c/o,p=c-o,$=void 0,d=void 0;$=h<this.$$view.width?(this.$$view.width-h)/2-r:Math.min(0,Math.max(this.$$view.width-h,(r-u)*f+u))-r,d=Math.min(0,Math.max(this.$$view.height-l,(i-s)*f+s))-i,($||d||p)&&(e?(this.$$animater&&this.$$animater.stop(),this.$$animater=F(e,function(e){e=t.$$ease(e),t.updateState({x:r+$*e,y:i+d*e,scale:o+p*e})})):this.updateState({x:r+$,y:i+d,scale:o+p}))}},{key:"handleTap",value:function(t){var e=t.event,n=ft(t.touches,1),r=n[0];if(this.props.onTap&&r){var i=this.$$target.getBoundingClientRect(),o=this.state,a=o.x,u=o.y,s=o.scale;s*=this.$$size.scale,a=(r.x-i.left-a)/s,u=(r.y-i.top-u)/s,this.props.onTap({event:e,touches:[{x:a,y:u}]})}}},{key:"handleTouchStart",value:function(){this.$$animater&&this.$$animater.stop()}},{key:"handleMove",value:function(t){var e=t.event,n=ft(t.touches,1),r=n[0];if(this.$$scaler){var i=this.$$paper.width,o=r.dx+this.state.x;!this.$$snap&&o<0&&o>this.$$view.width-i?e.stopPropagation():(this.$$snap=!0,o=this.state.x),this.updateState({x:o,y:this.state.y+r.dy})}}},{key:"handleMoveEnd",value:function(t){var e=this,n=ft(t.touches,1),r=n[0];if(r&&(r.dx||r.dy)){var i=r.dx,o=r.dy;this.$$animater&&this.$$animater.stop(),this.$$animater=F(1e3,function(t){if(i*=.95,o*=.95,t>=1||Math.abs(i)<1&&Math.abs(o)<1||e.state.x>0||e.state.y>0||e.state.x<e.$$view.width-e.$$paper.width||e.state.y<e.$$view.height-e.$$paper.height)return e.reset()||!1;e.updateState({x:e.state.x+i,y:e.state.y+o})})}}},{key:"handleScale",value:function(t){var e=t.event,n=t.scaler;if(this.$$scaler){var r=n(this.state),i=r.x,o=r.y,a=r.scale,u=r.cx,s=r.cy;this.$$paper=pt({},this.$$paper,{cx:u,cy:s}),this.updateState({x:i,y:o,scale:a})}e.stopPropagation()}},{key:"handleTouchEnd",value:function(){this.reset(),this.$$snap=!1}}]),e}(b.Component),bt=mt;n.d(e,"render",function(){return xt}),n.d(e,"unmount",function(){return Mt});var wt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gt=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),xt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,r=e.curr,i=e.mark,o=e.views,u=void 0===o?[]:o,s=e.onTap,c=e.onChange,h=a(n),l={curr:r},f=s&&function(t){var e=t.event,n=gt(t.touches,1),r=n[0];if(r&&"x"in r){var i=e.target||{},o=i.tagName,a="",u="";if("evenodd"===i.getAttribute("fill-rule"))return;"circle"===o?(u="point",a=i.getAttribute("id")):"path"!==o&&"rect"!==o||(u="area",a=i.getAttribute("id")),s(wt({id:a,type:u},r))}};return"number"!=typeof l.curr&&(l.curr=h.get("view")),l.onChange=function(t){h.set({view:t}),c&&c(t)},O(t).map(function(t){return Object(g.render)(w.a.createElement(ut,l,u.map(function(t,e){var n=t.id||e,r=wt({},t,{mark:i,scale:h.get(n),onTap:f,onScale:function(t){return h.set(m({},n,t))}});return w.a.createElement(bt,wt({key:n},r))})),t)})},Mt=function(t){return O(t).map(g.unmountComponentAtNode)}},function(t,n){t.exports=e},function(t,e,n){t.exports=n(4)()},function(t,e,n){"use strict";var r=n(5),i=n(6),o=n(7);t.exports=function(){function t(t,e,n,r,a,u){u!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";function r(t,e,n,r,o,a,u,s){if(i(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[n,r,o,a,u,s],l=0;c=new Error(e.replace(/%s/g,function(){return h[l++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(t){};t.exports=r},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}])});